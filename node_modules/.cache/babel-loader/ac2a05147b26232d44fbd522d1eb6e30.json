{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Documents\\\\GitHub\\\\antam-ecommerc\\\\src\\\\app\\\\page\\\\addProduct\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { addProductAction } from \"core/redux/actions/productActions\";\nimport { storage } from \"app/const/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AddProduct() {\n  _s();\n\n  const {\n    loading\n  } = useSelector(state => state.product);\n  const [dataSubmit, setDataSubmit] = useState({});\n  const [images, setImages] = useState([]);\n  const [urls, setUrls] = useState([]);\n  const dispatch = useDispatch();\n\n  const handleSubmit = () => {\n    dispatch(addProductAction({ ...dataSubmit,\n      url: urls\n    }));\n  };\n\n  const handleUpload = () => {\n    const promises = [];\n    images.forEach(image => {\n      let uploadTask = storage.ref(`images/${image.name}`).put(image);\n      promises.push(uploadTask);\n      uploadTask.on(\"state_changed\", snapshot => {}, error => {\n        console.log({\n          error\n        });\n      }, async () => {\n        await storage.ref(\"images\").child(image.name).getDownloadURL().then(url => {\n          console.log(url);\n          setUrls(prevState => [...prevState, url]);\n        }).catch(error => console.log(error));\n      });\n    });\n    Promise.all(promises).then(() => {\n      alert(\"upload thành công\");\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  const handleChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setDataSubmit({ ...dataSubmit,\n      [name]: value\n    });\n  };\n\n  const handleChangeImage = event => {\n    const files = event.target.files;\n\n    for (let i = 0; i < files.length; i++) {\n      const newImage = files[i];\n      setImages(prevState => [...prevState, newImage]);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-5\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mb-5\",\n      children: \"Th\\xEAm s\\u1EA3n ph\\u1EA9m\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        className: \"form-control-file mb-5\",\n        multiple: true,\n        onChange: handleChangeImage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-warning\",\n        type: \"button\",\n        onClick: handleUpload,\n        children: \"upload\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"T\\xEAn s\\u1EA3n ph\\u1EA9m\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"name\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"M\\xF4 t\\u1EA3\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"description\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group mt-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"form-control\",\n          name: \"price\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-primary mt-3\",\n        onClick: handleSubmit,\n        disabled: loading,\n        children: \"Th\\xEAm\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n}\n\n_s(AddProduct, \"ucBkfs3jSGV66gsvMVUp1wmGgYY=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = AddProduct;\nexport default AddProduct;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddProduct\");","map":{"version":3,"sources":["C:/Users/Administrator/Documents/GitHub/antam-ecommerc/src/app/page/addProduct/index.js"],"names":["React","useState","useDispatch","useSelector","addProductAction","storage","AddProduct","loading","state","product","dataSubmit","setDataSubmit","images","setImages","urls","setUrls","dispatch","handleSubmit","url","handleUpload","promises","forEach","image","uploadTask","ref","name","put","push","on","snapshot","error","console","log","child","getDownloadURL","then","prevState","catch","Promise","all","alert","handleChange","event","value","target","handleChangeImage","files","i","length","newImage"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { addProductAction } from \"core/redux/actions/productActions\";\r\nimport { storage } from \"app/const/firebase\";\r\n\r\nfunction AddProduct() {\r\n  const { loading } = useSelector((state) => state.product);\r\n  const [dataSubmit, setDataSubmit] = useState({});\r\n  const [images, setImages] = useState([]);\r\n  const [urls, setUrls] = useState([]);\r\n  const dispatch = useDispatch();\r\n\r\n  const handleSubmit = () => {\r\n    dispatch(addProductAction({ ...dataSubmit, url: urls }));\r\n  };\r\n\r\n  const handleUpload = () => {\r\n    const promises = [];\r\n\r\n    images.forEach((image) => {\r\n      let uploadTask = storage.ref(`images/${image.name}`).put(image);\r\n\r\n      promises.push(uploadTask);\r\n\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapshot) => {},\r\n        (error) => {\r\n          console.log({ error });\r\n        },\r\n        async () => {\r\n          await storage\r\n            .ref(\"images\")\r\n            .child(image.name)\r\n            .getDownloadURL()\r\n            .then((url) => {\r\n              console.log(url);\r\n\r\n              setUrls((prevState) => [...prevState, url]);\r\n            })\r\n            .catch((error) => console.log(error));\r\n        }\r\n      );\r\n    });\r\n\r\n    Promise.all(promises)\r\n      .then(() => {\r\n        alert(\"upload thành công\");\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n\r\n    setDataSubmit({\r\n      ...dataSubmit,\r\n      [name]: value,\r\n    });\r\n  };\r\n\r\n  const handleChangeImage = (event) => {\r\n    const files = event.target.files;\r\n\r\n    for (let i = 0; i < files.length; i++) {\r\n      const newImage = files[i];\r\n\r\n      setImages((prevState) => [...prevState, newImage]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container py-5\">\r\n      <h1 className=\"mb-5\">Thêm sản phẩm</h1>\r\n\r\n      <form>\r\n        <input\r\n          type=\"file\"\r\n          className=\"form-control-file mb-5\"\r\n          multiple\r\n          onChange={handleChangeImage}\r\n        />\r\n\r\n        <button\r\n          className=\"btn btn-warning\"\r\n          type=\"button\"\r\n          onClick={handleUpload}\r\n        >\r\n          upload\r\n        </button>\r\n\r\n        <div className=\"form-group\">\r\n          <label>Tên sản phẩm</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"name\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group mt-3\">\r\n          <label>Mô tả</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"description\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-group mt-3\">\r\n          <label>Giá</label>\r\n\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            name=\"price\"\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-primary mt-3\"\r\n          onClick={handleSubmit}\r\n          disabled={loading}\r\n        >\r\n          Thêm\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AddProduct;\r\n"]},"metadata":{},"sourceType":"module"}